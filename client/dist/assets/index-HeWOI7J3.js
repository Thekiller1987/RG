const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/login-Bimprv6I.js","assets/vendor-DfgwALhZ.js","assets/scanner-vendor-DfxRpMWJ.js","assets/pdf-vendor-CTN92j8O.js","assets/Dashboard-DhFuwn-S.js","assets/ConfirmationModal-Divp1PE6.js","assets/POS.styles-mxseP0n6.js","assets/UserManagement-BTvLgRq3.js","assets/InventoryManagement-F1ySHf6i.js","assets/PedidosYApartados-DSc4dhpd.js","assets/ClientesYCreditos-CcdqLQTi.js","assets/SalesHistoryModal-B_hgJb8J.js","assets/AlertModal-DnqPm_iy.js","assets/Finances-Dri5djhB.js","assets/POS-B0WuuXi5.js","assets/Reports-DBj8bU1A.js","assets/Unauthorized-Bl2OAtrv.js","assets/InventoryUpload-DT1vpl-O.js","assets/CashReport-CyU55hBH.js","assets/FacturasProveedores-RnqPmSDy.js","assets/Solicitudes-D8EKJGCz.js","assets/InventoryOutflowPage-YDk_MCGt.js","assets/DetailedSalesReport-Dde52UYY.js","assets/SettingsPage-72fwQhOb.js"])))=>i.map(i=>d[i]);
import{b as pe,r as c,u as ge,j as r,R as v,N as J,c as he,F as ye,A as je,e as xe,f as _,m as S,l as we,g as ve,B as _e}from"./vendor-DfgwALhZ.js";import{_ as E}from"./pdf-vendor-CTN92j8O.js";import"./scanner-vendor-DfxRpMWJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const w of a.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&s(w)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const ae="https://multirepuestosrg.com/api",lt=ae,Se=15e3,Ee=2,l=async(e,t,n=null,s=null,o={})=>{var D,k;const a={"Content-Type":"application/json",...o.headers||{}};n&&(a.Authorization=`Bearer ${n}`);const w=`${ae}${t}`,j=String(e||"get").toLowerCase(),R=j==="get"?Ee:0;for(let P=0;P<=R;P++)try{const h={url:w,method:j,headers:a,timeout:o.timeout||Se,withCredentials:!!o.withCredentials,...o};return s!==null&&j!=="get"&&(h.data=s),o.params&&j==="get"&&(h.params=o.params),(await pe.request(h)).data}catch(h){if(h.response){const i=((D=h.response.data)==null?void 0:D.message)||((k=h.response.data)==null?void 0:k.msg)||JSON.stringify(h.response.data),p=new Error(i||`HTTP ${h.response.status}`);throw p.status=h.response.status,p}if(P>=R){const i=new Error(h.code==="ECONNABORTED"?"Tiempo de espera agotado. Verifica tu conexión a internet.":h.message||"Error de conexión con el servidor.");throw i.isNetworkError=!0,i}const g=500*Math.pow(2,P);console.warn(`⚠️ Reintentando ${t} (intento ${P+2}/${R+1}) en ${g}ms...`),await new Promise(i=>setTimeout(i,g))}},dt=async e=>{const{username:t,nombre_usuario:n,password:s}=e;return await l("post","/auth/login",null,{nombre_usuario:n??t,password:s})},X=async e=>await l("get","/users",e),ee=async e=>{const t=await l("get","/products",e);return(Array.isArray(t)?t:[]).map(s=>({id:s.id_producto??s.id??s._id,id_producto:s.id_producto??s.id??s._id,codigo:s.codigo??s.code??"",nombre:s.nombre??s.nombre_producto??s.name??"Sin nombre",precio:Number(s.venta??s.precio??s.price??0),precio_venta:Number(s.venta??s.precio??s.price??0),existencia:Number(s.existencia??s.stock??0),imagen:s.imagen||null,descripcion:s.descripcion||"",categoria:s.nombre_categoria||"",costo:Number(s.costo||0),mayorista:Number(s.mayoreo||s.mayorista||0),venta:Number(s.venta??s.precio??s.price??0),raw:s}))},te=async e=>{const t=await l("get","/clients",e),n=Array.isArray(t)?t:[],s=n.find(a=>(a.nombre||"").toLowerCase().includes("contado")),o=n.filter(a=>s?a.id_cliente!==s.id_cliente:!0);return s?[s,...o]:n},Ae=async e=>await l("get","/categories",e),Ie=async e=>await l("get","/providers",e),ut=async(e,t=null)=>{const n={};return t&&(n.params={date:t}),await l("get","/sales",e,null,n)},ft=async(e,t)=>await l("post","/sales",t,e),mt=async(e,t)=>await l("post","/sales/returns",t,e),pt=async(e,t)=>await l("delete",`/sales/${e}`,t),Ce=async e=>await l("GET","/orders/pending",e),gt=(e,t)=>l("POST","/clients",t,e),ht=(e,t,n)=>l("PUT",`/clients/${e}`,n,t),yt=(e,t)=>l("DELETE",`/clients/${e}`,t),jt=(e,t,n)=>l("POST",`/clients/${e}/abono`,n,t),xt=(e,t)=>l("GET",`/clients/${e}/creditos`,t),wt=(e,t)=>l("GET",`/clients/${e}/abonos`,t),vt=(e,t)=>l("GET",`/clients/${e}/creditos-pendientes`,t),_t=(e,t)=>l("get","/reports/sales-summary",e,null,{params:t}),St=e=>l("get","/reports/inventory-value",e),Et=(e,t)=>l("get","/reports/sales-by-user",e,null,{params:t}),At=(e,t)=>l("get","/reports/top-products",e,null,{params:t}),It=(e,t)=>l("get","/reports/sales-chart",e,null,{params:t}),Ct=async(e,t)=>await l("post","/upload/inventory",t,{items:e}),Ne=async(e,t)=>{const n=localStorage.getItem("token");return await l("get","/caja/session",n,null,{params:{userId:e}})},Nt=async(e,t)=>await l("post","/caja/session/open",t,e),De=async(e,t)=>await l("post","/caja/session/tx",t,e),Dt=async(e,t)=>await l("post","/caja/session/close",t,e),Rt=async e=>await l("get","/caja/abiertas/activas",e),Ot=async e=>await l("get","/facturas-proveedores",e),Tt=async(e,t)=>await l("post","/facturas-proveedores",t,e),Pt=async(e,t,n)=>await l("post",`/facturas-proveedores/${e}/pagar`,n,{amount:t}),bt=async(e,t)=>await l("delete",`/facturas-proveedores/${e}`,t),se=async(e,t)=>await l("get","/caja/cart",t,null,{params:{userId:e}}),Re=async(e,t,n)=>await l("post","/caja/cart",n,{userId:e,carts:t}),Lt=async e=>await l("get","/requests",e),kt=async(e,t)=>await l("post","/requests",t,e),zt=async(e,t,n)=>await l("put",`/requests/${e}/toggle`,n,{completed:t}),$t=async(e,t,n)=>await l("put",`/requests/${e}`,n,{descripcion:t}),Ut=async(e,t)=>await l("delete",`/requests/${e}`,t),Vt=async(e,t)=>await l("post","/outflow",t,e),Mt=async e=>await l("get","/outflow/history",e),Oe=e=>{const t=e instanceof Date?e:new Date(e),n=t.getTimezoneOffset()*6e4;return new Date(t.getTime()-n).toISOString().split("T")[0]},Z=(e,t)=>`caja_session_${e}_${Oe(t)}`,K=e=>`caja_session_index_${e}`,re=(e,t)=>{if(!e){const o=String(t??"").trim();return o?{id:o,name:`Usuario ${o}`}:null}if(typeof e!="object")return{name:String(e)};const n=String(e.id??t??"").trim(),s=e.name??e.nombre??e.fullName??e.displayName??e.nombre_usuario??e.username??(n?`Usuario ${n}`:void 0);return{...e,...n?{id:n}:{},...s?{name:s}:{}}},ne=e=>{if(!e)return null;try{const t=localStorage.getItem(K(e));if(t){const s=localStorage.getItem(t);if(s)return JSON.parse(s)}const n=localStorage.getItem(Z(e,new Date));return n?JSON.parse(n):Pe(e)}catch(t){return console.error("Error al cargar la sesión de caja:",t),null}},Te=(e,t)=>{var n;if(!(!e||!t))try{const s={...t};s.openedBy&&(s.openedBy=re(s.openedBy,e)),s.closedBy&&(s.closedBy=re(s.closedBy,((n=s.closedBy)==null?void 0:n.id)||e));const o=s.openedAt?new Date(s.openedAt):new Date,a=Z(e,o);localStorage.setItem(a,JSON.stringify(s)),localStorage.setItem(K(e),a)}catch(s){console.error("Error al guardar la sesión de caja:",s)}},Pe=e=>{if(!e)return null;try{const t=new Date;for(let n=1;n<=7;n++){const s=new Date(t);s.setDate(t.getDate()-n);const o=Z(e,s),a=localStorage.getItem(o);if(a){const w=JSON.parse(a);if(w&&!w.closedAt)return localStorage.setItem(K(e),o),w}}return null}catch(t){return console.error("Error buscando sesiones antiguas:",t),null}},ie=c.createContext(null),be=({children:e,socket:t})=>{const[n,s]=c.useState(null),[o,a]=c.useState([]),[w,j]=c.useState([]),[L,R]=c.useState([]),[D,k]=c.useState([]),[P,h]=c.useState([]),[O,g]=c.useState(!0),i=ge(),[p,x]=c.useState(()=>localStorage.getItem("token")),[u,T]=c.useState(null),A=c.useRef(null),I=c.useCallback(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null),x(null),i("/login")},[i]),H="masterDataCache",V=c.useCallback(async(f,y=!1)=>{try{const m=await Promise.allSettled([X(f),ee(f),te(f),Ae(f),Ie(f)]),b=m[0].status==="fulfilled"?m[0].value||[]:null,z=m[1].status==="fulfilled"?m[1].value||[]:null,$=m[2].status==="fulfilled"?m[2].value||[]:null,N=m[3].status==="fulfilled"?m[3].value||[]:null,G=m[4].status==="fulfilled"?m[4].value||[]:null;b&&a(b),z&&j(z),$&&R($),N&&k(N),G&&h(G);try{const M={users:b||[],products:z||[],clients:$||[],categories:N||[],providers:G||[],timestamp:Date.now()};localStorage.setItem(H,JSON.stringify(M))}catch{}m.every(M=>{var Q;return M.status==="rejected"&&((Q=M.reason)==null?void 0:Q.status)===401})&&I()}catch(m){console.error("Fallo crítico cargando datos maestros:",m),m.status===401&&I()}},[I]),W=c.useCallback(()=>{var f,y,m,b,z;try{const $=localStorage.getItem(H);if($){const N=JSON.parse($);return(f=N.users)!=null&&f.length&&a(N.users),(y=N.products)!=null&&y.length&&j(N.products),(m=N.clients)!=null&&m.length&&R(N.clients),(b=N.categories)!=null&&b.length&&k(N.categories),(z=N.providers)!=null&&z.length&&h(N.providers),!0}}catch{}return!1},[]),q=c.useCallback(async()=>{if(p)try{const f=await ee(p);j(f||[])}catch(f){f.name!=="CanceledError"&&console.error("Error updating inventory:",f.message)}},[p]),Y=c.useCallback(()=>{A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{q()},300)},[q]),B=c.useCallback(async()=>{const f=localStorage.getItem("token");if(f)try{const y=await te(f);R(y||[])}catch{}},[]);c.useEffect(()=>{if(!t)return;const f=()=>{Y()};return t.on("inventory_update",f),t.on("products:update",f),t.on("clients:update",B),t.on("users:update",async()=>{const y=localStorage.getItem("token");if(y)try{const m=await X(y);a(m||[])}catch{}}),()=>{A.current&&clearTimeout(A.current),t.off("inventory_update",f),t.off("products:update",f),t.off("clients:update",B),t.off("users:update")}},[t,Y,B]),c.useEffect(()=>{(async()=>{g(!0);try{const y=localStorage.getItem("token"),m=localStorage.getItem("user");if(y&&m)try{const b=JSON.parse(m);s(b),x(y),W()?(g(!1),V(y,!0).catch(console.warn)):(await V(y),g(!1))}catch{I()}}finally{g(y=>y&&!1)}})()},[I,V,W]);const ue=async(f,y)=>{localStorage.setItem("token",y),localStorage.setItem("user",JSON.stringify(f)),s(f),x(y),g(!0),await V(y),g(!1),i("/dashboard")};c.useEffect(()=>{if(n){const f=n.id_usuario||n.id;T(ne(f))}else T(null)},[n]);const fe=c.useCallback(async f=>{if(!n)return;const y=n.id_usuario||n.id,m=ne(y);m&&!m.closedAt&&(m.transactions=[...m.transactions||[],f],Te(y,m),T(m));try{await De({userId:y,tx:f},p)}catch(b){console.error("❌ Error sincronizando transacción de caja:",b)}},[n,p]),me={user:n,token:p,allUsers:o,products:w,clients:L,categories:D,providers:P,isLoading:O,login:ue,logout:I,loadMasterData:V,refreshProducts:q,refreshClients:B,cajaSession:u,setCajaSession:T,addCajaTransaction:fe};return O&&!n?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"#f8fafc",color:"#64748b"},children:[r.jsx("div",{className:"spinner",style:{width:"50px",height:"50px",border:"5px solid #e2e8f0",borderTop:"5px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("h3",{style:{marginTop:"20px",fontWeight:600},children:"Cargando Sistema..."}),r.jsx("style",{children:`
                    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
                `})]}):r.jsx(ie.Provider,{value:me,children:e})},F=()=>{const e=c.useContext(ie);if(!e)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return e},ce=c.createContext(null),Le=({children:e,user:t,socket:n})=>{const s=(t==null?void 0:t.id_usuario)||(t==null?void 0:t.id),[o,a]=c.useState(!1),[w,j]=c.useState(null),[L,R]=c.useState(36.6),D=c.useCallback(async()=>{var h,O;if(s)try{const g=await Ne(s);g&&!g.closedAt?(j(g),a(!0),g.tasaDolar&&R(Number(g.tasaDolar))):(j(null),a(!1))}catch(g){if(g.isNetworkError||(h=g.message)!=null&&h.includes("timeout")||(O=g.message)!=null&&O.includes("conexión")||!g.status){console.warn("⚠️ Error de red al sincronizar caja (manteniendo estado actual):",g.message);return}console.error("❌ Error de servidor al sincronizar caja:",g),j(null),a(!1)}},[s]);c.useEffect(()=>{if(!s){a(!1),j(null);return}if(D(),n){const O=i=>{(!i||!i.userId||i.userId===s)&&(console.log("⚡ Socket: caja session update"),D())},g=i=>{(!i||!i.userId||i.userId===s)&&(console.log("⚡ Socket: New Tx"),D())};return n.on("caja:session_update",O),n.on("caja:transaction_new",g),()=>{n.off("caja:session_update",O),n.off("caja:transaction_new",g)}}const h=setInterval(D,6e4);return()=>{clearInterval(h)}},[s,D,n]);const P={isCajaOpen:o,setIsCajaOpen:a,cajaSession:w,setCajaSession:j,tasaDolar:L,setTasaDolar:R,closeCajaSession:()=>{s&&(j(null),a(!1))},refreshSession:D};return r.jsx(ce.Provider,{value:P,children:e})},Bt=()=>{const e=c.useContext(ce);if(!e)throw new Error("useCaja must be used within CajaProvider");return e},le=c.createContext(null),ke=({children:e})=>{const[t,n]=c.useState([]),[s,o]=c.useState(null),[a,w]=c.useState(null),j=t.find(i=>i.id===s)||{items:[]},L=c.useCallback(async i=>{if(!i)return;w(i);try{const x=localStorage.getItem("token"),u=await se(i,x);if(u&&Array.isArray(u)&&u.length>0){n(u),o(u[0].id);return}}catch(x){console.error("Error loading carts from DB, falling back to local:",x)}const p=[{id:Date.now(),name:"Ticket 1",items:[]}];n(p),o(p[0].id)},[]);c.useEffect(()=>{if(a&&t.length>0){const i=setTimeout(()=>{const p=localStorage.getItem("token");Re(a,t,p).catch(x=>console.error("Error saving cart:",x))},1e3);return()=>clearTimeout(i)}},[t,a]);const R=()=>{const i={id:Date.now(),name:`Ticket ${t.length+1}`,items:[]};n(p=>[...p,i]),o(i.id)},D=i=>{h.current&&(h.current.add(String(i)),setTimeout(()=>{h.current&&h.current.delete(String(i))},1e4));let p=[];n(u=>{const T=u.filter(A=>A.id!==i);if(T.length===0){const A={id:Date.now(),name:"Ticket 1",items:[]};p=[A],A.id}else p=T,s===i&&T[0].id;return p});const x=t.filter(u=>u.id!==i);if(x.length===0){const u={id:Date.now(),name:"Ticket 1",items:[]};n([u]),o(u.id)}else n(x),s===i&&o(x[0].id)},k=(i,p)=>{n(x=>x.map(u=>u.id===s?{...u,[i]:p}:u))},P=async()=>{try{const i=localStorage.getItem("token"),p=await Ce(i);if(p&&p.length>0){const x=p.map(u=>({id:`server_${u.id_pedido}`,serverSaleId:u.id_pedido,name:`Pedido #${u.id_pedido}`,items:u.items||[],client:u.cliente}));n(u=>{const T=new Set(u.map(I=>I.id)),A=x.filter(I=>!T.has(I.id));return[...u,...A]})}}catch(i){console.error("Error loading pending orders",i)}},h=v.useRef(new Set),O=c.useCallback(async i=>{if(i)try{const p=localStorage.getItem("token"),x=await se(i,p);x&&Array.isArray(x)&&n(u=>{const T=new Set(u.map(I=>I.id)),A=x.filter(I=>!T.has(I.id)&&!h.current.has(String(I.id)));return A.length>0?[...u,...A]:u})}catch{}},[]),g={orders:t,setOrders:n,activeOrderId:s,setActiveOrderId:o,activeOrder:j,handleNewOrder:R,handleRemoveOrder:D,updateActiveOrder:k,loadOrdersFromDB:L,loadPendingOrdersFromServer:P,checkForNewOrders:O};return r.jsx(le.Provider,{value:g,children:e})},Ft=()=>{const e=c.useContext(le);if(!e)throw new Error("useOrders must be used within OrdersProvider");return e},ze=async e=>{try{const t=await fetch("undefined/settings",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok){const s=await t.text();return console.warn("Settings API Error:",t.status,s.substring(0,100)),null}const n=t.headers.get("content-type");return!n||!n.includes("application/json")?(console.warn("Settings API returned non-JSON:",n),null):await t.json()}catch(t){return console.error("getSettings error:",t),null}},qt=async(e,t)=>{const n=await fetch("undefined/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!n.ok)throw new Error("Error al actualizar configuración");return await n.json()},Gt=async(e,t)=>new Promise((n,s)=>{const o=new FileReader;o.readAsDataURL(t),o.onload=async()=>{try{const a=await fetch("undefined/settings/logo",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({logo:o.result})});if(!a.ok)throw new Error("Error subiendo logo");const w=await a.json();n(w.logoUrl)}catch(a){s(a)}},o.onerror=a=>s(a)}),de=c.createContext(),$e=({children:e})=>{const{token:t}=F(),[n,s]=c.useState({empresa_nombre:"Multirepuestos RG",empresa_ruc:"1211812770001E",empresa_telefono:"84031936 / 84058142",empresa_direccion:"Del portón de la normal 75 varas al este. Juigalpa, Chontales.",empresa_eslogan:"Repuestos de confianza al mejor precio — calidad que mantiene tu motor en marcha.",empresa_logo_url:""}),[o,a]=c.useState(!0),w=async()=>{if(t)try{const j=await ze(t);j&&s(L=>({...L,...j}))}catch(j){console.error("Error loading settings:",j)}finally{a(!1)}};return c.useEffect(()=>{w()},[t]),r.jsx(de.Provider,{value:{settings:n,refreshSettings:w,loading:o},children:e})},Jt=()=>c.useContext(de),C=({children:e,allowedRoles:t})=>{const{user:n,isLoading:s}=F();return s?r.jsx("div",{style:{padding:"2rem"},children:"Cargando..."}):n?t&&Array.isArray(t)&&!t.includes(n.rol)?r.jsx(J,{to:"/unauthorized",replace:!0}):e:r.jsx(J,{to:"/login",replace:!0})},Ue=v.lazy(()=>E(()=>import("./login-Bimprv6I.js"),__vite__mapDeps([0,1,2,3]))),Ve=v.lazy(()=>E(()=>import("./Dashboard-DhFuwn-S.js"),__vite__mapDeps([4,3,1,2,5,6]))),Me=v.lazy(()=>E(()=>import("./UserManagement-BTvLgRq3.js"),__vite__mapDeps([7,1,2]))),Be=v.lazy(()=>E(()=>import("./InventoryManagement-F1ySHf6i.js"),__vite__mapDeps([8,1,2]))),Fe=v.lazy(()=>E(()=>import("./PedidosYApartados-DSc4dhpd.js"),__vite__mapDeps([9,1,2,3]))),qe=v.lazy(()=>E(()=>import("./ClientesYCreditos-CcdqLQTi.js"),__vite__mapDeps([10,1,2,11,6,12,3]))),Ge=v.lazy(()=>E(()=>import("./Finances-Dri5djhB.js"),__vite__mapDeps([13,1,2,12,6]))),Je=v.lazy(()=>E(()=>import("./POS-B0WuuXi5.js"),__vite__mapDeps([14,1,2,6,11,12,5,3]))),Ze=v.lazy(()=>E(()=>import("./Reports-DBj8bU1A.js"),__vite__mapDeps([15,1,2,12,6,3]))),Ke=v.lazy(()=>E(()=>import("./Unauthorized-Bl2OAtrv.js"),__vite__mapDeps([16,1,2]))),He=v.lazy(()=>E(()=>import("./InventoryUpload-DT1vpl-O.js"),__vite__mapDeps([17,1,2,3]))),We=v.lazy(()=>E(()=>import("./CashReport-CyU55hBH.js"),__vite__mapDeps([18,1,2,3]))),Ye=v.lazy(()=>E(()=>import("./FacturasProveedores-RnqPmSDy.js"),__vite__mapDeps([19,1,2,3]))),Qe=v.lazy(()=>E(()=>import("./Solicitudes-D8EKJGCz.js"),__vite__mapDeps([20,1,2,3]))),Xe=v.lazy(()=>E(()=>import("./InventoryOutflowPage-YDk_MCGt.js"),__vite__mapDeps([21,1,2,3]))),et=v.lazy(()=>E(()=>import("./DetailedSalesReport-Dde52UYY.js"),__vite__mapDeps([22,1,2,3]))),tt=v.lazy(()=>E(()=>import("./SettingsPage-72fwQhOb.js"),__vite__mapDeps([23,1,2,3]))),oe=()=>r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"#64748b"},children:"Cargando..."}),d={ADMIN:"Administrador",VENDEDOR:"Vendedor",INVENTARIO:"Encargado de Inventario",FINANZAS:"Encargado de Finanzas",GERENTE:"Gerente",EMPLEADO:"Empleado"};function st(){const{user:e,isLoading:t}=F(),n=he();if(t)return r.jsx(oe,{});const s={initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.2,ease:"easeOut"}};return r.jsxs(v.Suspense,{fallback:r.jsx(oe,{}),children:[r.jsx(ye,{position:"top-center",reverseOrder:!1}),r.jsx(je,{mode:"wait",children:r.jsxs(xe,{location:n,children:[r.jsx(_,{path:"/login",element:r.jsx(S.div,{...s,children:r.jsx(Ue,{})})}),r.jsx(_,{path:"/unauthorized",element:r.jsx(S.div,{...s,children:r.jsx(Ke,{})})}),r.jsx(_,{path:"/dashboard",element:r.jsx(C,{children:r.jsx(S.div,{...s,children:r.jsx(Ve,{})})})}),r.jsx(_,{path:"/pos",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.VENDEDOR],children:r.jsx(S.div,{...s,children:r.jsx(Je,{})})})}),r.jsx(_,{path:"/inventory",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.INVENTARIO],children:r.jsx(S.div,{...s,children:r.jsx(Be,{})})})}),r.jsx(_,{path:"/orders",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.VENDEDOR,d.EMPLEADO],children:r.jsx(S.div,{...s,children:r.jsx(Fe,{})})})}),r.jsx(_,{path:"/credits",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.VENDEDOR,d.FINANZAS],children:r.jsx(S.div,{...s,children:r.jsx(qe,{})})})}),r.jsx(_,{path:"/finances",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.FINANZAS],children:r.jsx(S.div,{...s,children:r.jsx(Ge,{})})})}),r.jsx(_,{path:"/reports",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.GERENTE,d.FINANZAS],children:r.jsx(S.div,{...s,children:r.jsx(Ze,{})})})}),r.jsx(_,{path:"/admin/users",element:r.jsx(C,{allowedRoles:[d.ADMIN],children:r.jsx(S.div,{...s,children:r.jsx(Me,{})})})}),r.jsx(_,{path:"/upload/inventory",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.INVENTARIO],children:r.jsx(S.div,{...s,children:r.jsx(He,{})})})}),r.jsx(_,{path:"/cash-report",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.GERENTE,d.FINANZAS],children:r.jsx(S.div,{...s,children:r.jsx(We,{})})})}),r.jsx(_,{path:"/traslados",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.INVENTARIO],children:r.jsx(S.div,{...s,children:r.jsx(Xe,{})})})}),r.jsx(_,{path:"/detailed-sales-report",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.GERENTE,d.FINANZAS],children:r.jsx(S.div,{...s,children:r.jsx(et,{})})})}),r.jsx(_,{path:"/invoices",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.FINANZAS],children:r.jsx(S.div,{...s,children:r.jsx(Ye,{})})})}),r.jsx(_,{path:"/solicitudes",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.VENDEDOR,d.INVENTARIO,d.FINANZAS,d.GERENTE],children:r.jsx(S.div,{...s,children:r.jsx(Qe,{})})})}),r.jsx(_,{path:"/settings",element:r.jsx(C,{allowedRoles:[d.ADMIN,d.GERENTE],children:r.jsx(S.div,{...s,children:r.jsx(tt,{})})})}),r.jsx(_,{path:"*",element:r.jsx(J,{to:e?"/dashboard":"/login",replace:!0})})]},n.pathname)})]})}const rt="https://multirepuestosrg.com",U=we(rt,{path:"/socket.io/",transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,autoConnect:!0});U.on("connect",()=>{console.log("✅ Socket Connected:",U.id)});U.on("connect_error",e=>{console.warn("⚠️ Socket Connection Error (retrying...):",e.message)});U.on("disconnect",e=>{console.warn("❌ Socket Disconnected:",e),e==="io server disconnect"&&U.connect()});const nt=({socket:e})=>{const{user:t}=F();return r.jsx(Le,{user:t,socket:e,children:r.jsx($e,{children:r.jsx(ke,{children:r.jsx(st,{})})})})};ve.createRoot(document.getElementById("root")).render(r.jsx(v.StrictMode,{children:r.jsx(_e,{children:r.jsx(be,{socket:U,children:r.jsx(nt,{socket:U})})})}));export{St as A,Et as B,At as C,It as D,Ct as E,Ot as F,lt as G,Tt as H,Pt as I,bt as J,Lt as K,kt as L,zt as M,$t as N,Ut as O,Vt as P,Mt as Q,Jt as a,Gt as b,qt as c,ee as d,ht as e,Rt as f,se as g,gt as h,vt as i,xt as j,wt as k,dt as l,ut as m,yt as n,Bt as o,Ft as p,Dt as q,Nt as r,Re as s,mt as t,F as u,pt as v,De as w,ft as x,jt as y,_t as z};
