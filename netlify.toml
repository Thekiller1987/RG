# ==========================================================
# CONFIGURACIÓN PARA FRONTEND-ONLY (Netlify)
# Backend en Render, Base de Datos en Supabase
# ==========================================================

[build]
  # Le dice a Netlify que entre a la carpeta 'client' para construir el frontend
  base = "client"
  # El comando para construir tu aplicación de Vite
  command = "npm run build"
  # La carpeta donde Vite deja los archivos construidos
  publish = "dist"

[context.production.environment]
  # Forzamos Node.js v18 para asegurar compatibilidad.
  NODE_VERSION = "18"
  # Mantenemos el aumento de memoria para el build de Vite, es una buena práctica.
  NODE_OPTIONS = "--max-old-space-size=4096"

# --- REGLA ÚNICA Y CRÍTICA PARA EL FRONTEND (SPA) ---
# Cualquier petición que llegue a Netlify debe servir el archivo principal
# de tu aplicación de React (index.html). Esto permite que el router de
# React en el navegador tome el control de las rutas.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

